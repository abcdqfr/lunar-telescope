#!/usr/bin/env bash
set -euo pipefail

# Lunar Telescope deterministic pre-push hook
#
# This prevents public CI spam by running local preflight checks before push.
# It performs no network fetches and respects the hybrid contract:
# - baseline must always pass
# - optional tools are best-effort
#
# Enable with:
#   git config core.hooksPath .githooks
#
# Policy note:
# Git allows bypassing hooks. In this project, bypassing pre-push verification is a
# violation of project policy. Enforce server-side with branch protection rules.

echo "[pre-push] Running Lunar Telescope CI-equivalent preflight..."
make preflight-ci
echo "[pre-push] OK"


